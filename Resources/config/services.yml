parameters:
    es.logging.path: %kernel.logs_dir%/elasticsearch_%kernel.environment%.log

    es.metadata_collector.class: ONGR\ElasticsearchBundle\Mapping\MetadataCollector
    es.metadata_collector_factory.class: ONGR\ElasticsearchBundle\Mapping\MetadataCollectorFactory
    es.export.class: ONGR\ElasticsearchBundle\Service\ExportService
    es.import.class: ONGR\ElasticsearchBundle\Service\ImportService
    es.client.index_suffix_finder.class: ONGR\ElasticsearchBundle\Client\IndexSuffixFinder
    es.collector.class: ONGR\ElasticsearchBundle\Service\ESDataCollector

services:
    es.metadata_collector_factory:
        class: %es.metadata_collector_factory.class%
        arguments:
            - %kernel.bundles%
            - %kernel.cache_dir%
        calls:
            - [setDebug, [%kernel.debug%]]

    es.metadata_collector:
        class: %es.metadata_collector.class%
        factory_service: es.metadata_collector_factory
        factory_method: get

    es.export:
        class: %es.export.class%

    es.import:
        class: %es.import.class%

    es.client.index_suffix_finder:
        class: %es.client.index_suffix_finder.class%

    es.collector:
        class: "%es.collector.class%"
        calls:
            - [addLogger, ["@es.logger.trace"]]
        tags:
            - { name: data_collector, template: "ONGRElasticsearchBundle:Profiler:profiler.html.twig", id: "es" }
